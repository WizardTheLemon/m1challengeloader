<?xml version="1.0" encoding="utf-8" ?>
<Scene forcenavmesh="true">
  <model>ch_mirror_crystal_cavern</model>
  <reverb roomType="Cave" mix="40" />
  <Indoor>true</Indoor>

  <trigger id="Start" repeat="false">
    <if />
    <then>
      <cameramagnify magnification="0.8"/>
      <playMusic cue="music_encounter" delay="3"/>
      <counter name="crystal_1_up" action="set" value="0" />
      <counter name="crystal_2_up" action="set" value="0" />
      <counter name="crystal_3_up" action="set" value="0" />
      <counter name="crystal_4_up" action="set" value="0" />
      <counter name="crystal_5_up" action="set" value="0" />
      <counter name="crystal_6_up" action="set" value="0" />
      <counter name="crystal_7_up" action="set" value="0" />
      <counter name="crystal_8_up" action="set" value="0" />
      <counter name="crystal_9_up" action="set" value="0" />
      <counter name="crystal_10_up" action="set" value="0" />
    </then>
  </trigger>
  
  <!--
      Mirror Crystal Cavern Hideout
      
      Waves of enemies from all directions in a chamber with reflective walls as well as
      movable crystals protruding and retracting from the ground, causing beams to bounce
      off of them and fly all over the place.
      
      15 waves in total divided into 5 theme chunks (3 waves each):
      
      1. Water / Poison
      2. Lightning / Stone
      3. Fire / Cold
      4. Arcane / Life
      5. All Elements
      
      Potential extra 5 waves:
      One extra wave per "chunk"      
      
      Where every last wave of a chunk is a form of boss wave. The point of the themes is to
      trip the player up using enemies that complement each other's element.
      
      Crystals can be animated at any time as they animate quickly and pose no direct danger.
      This means we don't need to wait for crystals to animate before spawning monsters.
      Crystals are supposed to protrude from the ground and stay up. In special waves we can
      animate one or more crystals (causing them to come up and go back down over and over again).
           
      The order in which the crystals come up from the ground is fixed but should feel relatively
      random. The first wave will have no crystals. More and more crystals come up from the ground
      for every wave that is completed. The next to last wave have no crystals. The last
      wave have all crystals up but will retract one crystal at a time during the entire wave.
      
      NOTE: Continously animated crystals in network play might become out-of-sync after a while.
      
      The crystals have 2 purposes:
      To trip the player up and make it complicated to cast beams safely.
      To act as cover from mainly ranged attackers.
  -->

  <!--
      There are 8 entrances, all of which are defined here.
      The map is shaped like a diamond with 2 entrances per wall,
      grouped in north, east, south and west corners.
  -->
  <RuleSet type="Survival" waves="15">
    <spawnAreas>
      <area>northleft</area>
      <area>northright</area>
      
      <area>eastleft</area>
      <area>eastright</area>
      
      <area>southleft</area>
      <area>southright</area>
      
      <area>westleft</area>
      <area>westright</area>
    </spawnAreas>
  </RuleSet>

  <!-- Trigger scripts -->
  
  <!-- Call these scripts to lower and raise the reflective crystals
      that are spread around the map. Using these instead of using playAnimation
      manually is easier and makes sure a crystal is not raised or lowered
      if it is already in those respective states.
      
      Note that the up animation is from 0 to 1 and down is 1 to 2. -->
  <trigger id="crystal_1_up" autorun="false" repeat="true">
    <if>
      <counter name="crystal_1_up" compareMethod="equal" value="0" />
    </if>
    <then>
      <playAnimation name="crystal1" start="0" end="1" loop="false" speed="1" delay="0" />
      <counter name="crystal_1_up" action="set" value="1" />
    </then>
  </trigger>

  <trigger id="crystal_1_down" autorun="false" repeat="true">
    <if>
      <counter name="crystal_1_up" compareMethod="equal" value="1" />
    </if>
    <then>
      <playAnimation name="crystal1" start="1" end="2" loop="false" speed="1" delay="0" />
      <counter name="crystal_1_up" action="set" value="0" />
    </then>
  </trigger>

  <trigger id="crystal_2_up" autorun="false" repeat="true">
    <if>
      <counter name="crystal_2_up" compareMethod="equal" value="0" />
    </if>
    <then>
      <playAnimation name="crystal2" start="0" end="1" loop="false" speed="1" delay="0" />
      <counter name="crystal_2_up" action="set" value="1" />
    </then>
  </trigger>

  <trigger id="crystal_2_down" autorun="false" repeat="true">
    <if>
      <counter name="crystal_2_up" compareMethod="equal" value="1" />
    </if>
    <then>
      <playAnimation name="crystal2" start="1" end="2" loop="false" speed="1" delay="0" />
      <counter name="crystal_2_up" action="set" value="0" />
    </then>
  </trigger>

  <trigger id="crystal_3_up" autorun="false" repeat="true">
    <if>
      <counter name="crystal_3_up" compareMethod="equal" value="0" />
    </if>
    <then>
      <playAnimation name="crystal3" start="0" end="1" loop="false" speed="1" delay="0" />
      <counter name="crystal_3_up" action="set" value="1" />
    </then>
  </trigger>

  <trigger id="crystal_3_down" autorun="false" repeat="true">
    <if>
      <counter name="crystal_3_up" compareMethod="equal" value="1" />
    </if>
    <then>
      <playAnimation name="crystal3" start="1" end="2" loop="false" speed="1" delay="0" />
      <counter name="crystal_3_up" action="set" value="0" />
    </then>
  </trigger>

  <trigger id="crystal_4_up" autorun="false" repeat="true">
    <if>
      <counter name="crystal_4_up" compareMethod="equal" value="0" />
    </if>
    <then>
      <playAnimation name="crystal4" start="0" end="1" loop="false" speed="1" delay="0" />
      <counter name="crystal_4_up" action="set" value="1" />
    </then>
  </trigger>

  <trigger id="crystal_4_down" autorun="false" repeat="true">
    <if>
      <counter name="crystal_4_up" compareMethod="equal" value="1" />
    </if>
    <then>
      <playAnimation name="crystal4" start="1" end="2" loop="false" speed="1" delay="0" />
      <counter name="crystal_4_up" action="set" value="0" />
    </then>
  </trigger>

  <trigger id="crystal_5_up" autorun="false" repeat="true">
    <if>
      <counter name="crystal_5_up" compareMethod="equal" value="0" />
    </if>
    <then>
      <playAnimation name="crystal5" start="0" end="1" loop="false" speed="1" delay="0" />
      <counter name="crystal_5_up" action="set" value="1" />
    </then>
  </trigger>

  <trigger id="crystal_5_down" autorun="false" repeat="true">
    <if>
      <counter name="crystal_5_up" compareMethod="equal" value="1" />
    </if>
    <then>
      <playAnimation name="crystal5" start="1" end="2" loop="false" speed="1" delay="0" />
      <counter name="crystal_5_up" action="set" value="0" />
    </then>
  </trigger>

  <trigger id="crystal_6_up" autorun="false" repeat="true">
    <if>
      <counter name="crystal_6_up" compareMethod="equal" value="0" />
    </if>
    <then>
      <playAnimation name="crystal6" start="0" end="1" loop="false" speed="1" delay="0" />
      <counter name="crystal_6_up" action="set" value="1" />
    </then>
  </trigger>

  <trigger id="crystal_6_down" autorun="false" repeat="true">
    <if>
      <counter name="crystal_6_up" compareMethod="equal" value="1" />
    </if>
    <then>
      <playAnimation name="crystal6" start="1" end="2" loop="false" speed="1" delay="0" />
      <counter name="crystal_6_up" action="set" value="0" />
    </then>
  </trigger>

  <trigger id="crystal_7_up" autorun="false" repeat="true">
    <if>
      <counter name="crystal_7_up" compareMethod="equal" value="0" />
    </if>
    <then>
      <playAnimation name="crystal7" start="0" end="1" loop="false" speed="1" delay="0" />
      <counter name="crystal_7_up" action="set" value="1" />
    </then>
  </trigger>

  <trigger id="crystal_7_down" autorun="false" repeat="true">
    <if>
      <counter name="crystal_7_up" compareMethod="equal" value="1" />
    </if>
    <then>
      <playAnimation name="crystal7" start="1" end="2" loop="false" speed="1" delay="0" />
      <counter name="crystal_7_up" action="set" value="0" />
    </then>
  </trigger>

  <trigger id="crystal_8_up" autorun="false" repeat="true">
    <if>
      <counter name="crystal_8_up" compareMethod="equal" value="0" />
    </if>
    <then>
      <playAnimation name="crystal8" start="0" end="1" loop="false" speed="1" delay="0" />
      <counter name="crystal_8_up" action="set" value="1" />
    </then>
  </trigger>

  <trigger id="crystal_8_down" autorun="false" repeat="true">
    <if>
      <counter name="crystal_8_up" compareMethod="equal" value="1" />
    </if>
    <then>
      <playAnimation name="crystal8" start="1" end="2" loop="false" speed="1" delay="0" />
      <counter name="crystal_8_up" action="set" value="0" />
    </then>
  </trigger>

  <trigger id="crystal_9_up" autorun="false" repeat="true">
    <if>
      <counter name="crystal_9_up" compareMethod="equal" value="0" />
    </if>
    <then>
      <playAnimation name="crystal9" start="0" end="1" loop="false" speed="1" delay="0" />
      <counter name="crystal_9_up" action="set" value="1" />
    </then>
  </trigger>

  <trigger id="crystal_9_down" autorun="false" repeat="true">
    <if>
      <counter name="crystal_9_up" compareMethod="equal" value="1" />
    </if>
    <then>
      <playAnimation name="crystal9" start="1" end="2" loop="false" speed="1" delay="0" />
      <counter name="crystal_9_up" action="set" value="0" />
    </then>
  </trigger>

  <trigger id="crystal_10_up" autorun="false" repeat="true">
    <if>
      <counter name="crystal_10_up" compareMethod="equal" value="0" />
    </if>
    <then>
      <playAnimation name="crystal10" start="0" end="1" loop="false" speed="1" delay="0" />
      <counter name="crystal_10_up" action="set" value="1" />
    </then>
  </trigger>

  <trigger id="crystal_10_down" autorun="false" repeat="true">
    <if>
      <counter name="crystal_10_up" compareMethod="equal" value="1" />
    </if>
    <then>
      <playAnimation name="crystal10" start="1" end="2" loop="false" speed="1" delay="0" />
      <counter name="crystal_10_up" action="set" value="0" />
    </then>
  </trigger>

  <trigger id="crystal_all_up" autorun="false" repeat="true">
    <then>
      <executeTrigger trigger="crystal_1_up" />
      <executeTrigger trigger="crystal_2_up" />
      <executeTrigger trigger="crystal_3_up" />
      <executeTrigger trigger="crystal_4_up" />
      <executeTrigger trigger="crystal_5_up" />
      <executeTrigger trigger="crystal_6_up" />
      <executeTrigger trigger="crystal_7_up" />
      <executeTrigger trigger="crystal_8_up" />
      <executeTrigger trigger="crystal_9_up" />
      <executeTrigger trigger="crystal_10_up" />
    </then>
  </trigger>

  <trigger id="crystal_all_down" autorun="false" repeat="true">
    <then>
      <executeTrigger trigger="crystal_1_down" />
      <executeTrigger trigger="crystal_2_down" />
      <executeTrigger trigger="crystal_3_down" />
      <executeTrigger trigger="crystal_4_down" />
      <executeTrigger trigger="crystal_5_down" />
      <executeTrigger trigger="crystal_6_down" />
      <executeTrigger trigger="crystal_7_down" />
      <executeTrigger trigger="crystal_8_down" />
      <executeTrigger trigger="crystal_9_down" />
      <executeTrigger trigger="crystal_10_down" />
    </then>
  </trigger>





  <!-- Waves -->
  
  <!--  WAVE 1
        Notes:    Goblins, Beastman, warm-up
                  Crystals: no crystals
        -->
  <wave>
    <!-- Make sure all crystals are down -->
    <waveActions delay="0">
      <executeTrigger trigger="crystal_all_down" />
    </waveActions>
    
    <!-- 2 Streams of raiders from any direction -->
    <waveActions area="any" delay="0">
      <spawn type="beastman_raider" 		nr="1" delay="0" />
      <spawn type="beastman_raider" 		nr="1" delay="2" />
      <spawn type="beastman_raider_water" 	nr="1" delay="4" />
      <spawn type="beastman_raider_water" 	nr="1" delay="6" />
      <spawn type="beastman_raider" 		nr="1" delay="8" />
      <spawn type="beastman_raider" 		nr="1" delay="10" />
    </waveActions>
    <waveActions area="any" delay="1">
      <spawn type="beastman_raider" 		nr="1" delay="0" />
      <spawn type="beastman_raider" 		nr="1" delay="2" />
      <spawn type="beastman_raider_water" 	nr="1" delay="4" />
      <spawn type="beastman_raider_water" 	nr="1" delay="6" />
      <spawn type="beastman_raider" 		nr="1" delay="8" />
      <spawn type="beastman_raider" 		nr="1" delay="10" />
    </waveActions>

    <waveActions area="any" delay="5">
      <spawn type="goblin_shaman" nr="1" delay="0" />
      <spawn type="troll_stone" nr="1" delay="0" />
    </waveActions>
    <waveActions area="any" delay="5">
      <spawn type="goblin_shaman" nr="1" delay="0" />
      <spawn type="troll_stone" nr="1" delay="0" />
    </waveActions>
  </wave>
  
  
  
  

  <!--  WAVE 2
        Notes:    Spiders
                  Crystals: no crystals
        -->
  <wave>
    <!-- Large spiders as melee and ranged support -->
    <waveActions area="any" delay="0">
      <spawn type="spider_forest" nr="2" delay="0" />
      <spawn type="goblin_shaman" nr="1" delay="0" />
    </waveActions>
	
    <waveActions area="any" delay="2">
      <spawn type="spider_forest" nr="2" delay="0" />
    </waveActions>
	
    <waveActions area="any" delay="4">
      <spawn type="spider_forest" nr="2" delay="0" />
    </waveActions>
	
    <waveActions area="any" delay="6">
      <spawn type="spider_forest" nr="4" delay="0" />
      <spawn type="goblin_shaman" nr="1" delay="0" />
    </waveActions>
	
    <waveActions area="any" delay="8">
      <spawn type="spider_forest" nr="4" delay="0" />
    </waveActions>
	
    <waveActions area="any" delay="10">
      <spawn type="spider_forest" nr="4" delay="0" />
      <spawn type="goblin_shaman" nr="1" delay="0" />
    </waveActions>

    <waveActions area="any" delay="2">
      <spawn type="spider_poison" nr="2" delay="0" />
    </waveActions>
	
    <waveActions area="any" delay="5">
      <spawn type="spider_poison" nr="2" delay="0" />
    </waveActions>
	
    <waveActions area="any" delay="8">
      <spawn type="spider_poison" nr="2" delay="0" />
      <spawn type="goblin_shaman" nr="1" delay="0" />
    </waveActions>
	
    <waveActions area="any" delay="11">
      <spawn type="spider_poison" nr="2" delay="0" />
      <spawn type="goblin_shaman" nr="1" delay="0" />
    </waveActions>
  </wave>





  <!--  WAVE 3
        Notes:    Darksouls, Elementals
                  Crystals: no crystals
        -->
  <wave>
    <!-- Raise / Lower crystals -->
    <waveActions delay="0">
      <executeTrigger trigger="crystal_all_down" />
    </waveActions>

    <!-- Spawn loads of Darksouls -->
    <waveActions area="any" delay="0">
      <spawn order="attack" type="skeleton_darksoul_frost" nr="3" delay="0" />
      <spawn 				type="beastman_brute_fire" 	   nr="1" delay="1.5" />
      <spawn order="attack" type="skeleton_darksoul_frost" nr="3" delay="3" />
    </waveActions>
    <waveActions area="any" delay="3">
      <spawn order="attack" type="skeleton_darksoul_frost" nr="3" delay="0" />
      <spawn 				type="beastman_brute_fire" 	   nr="1" delay="1.5" />
      <spawn order="attack" type="skeleton_darksoul_frost" nr="3" delay="3" />
    </waveActions>
    <waveActions area="any" delay="6">
      <spawn order="attack" type="skeleton_darksoul_frost" nr="3" delay="0" />
      <spawn order="attack" type="skeleton_darksoul_frost" nr="3" delay="2" />
    </waveActions>
    <waveActions area="any" delay="10">
      <spawn order="attack" type="skeleton_darksoul_frost" nr="3" delay="0" />
      <spawn order="attack" type="skeleton_darksoul_frost" nr="3" delay="2" />
    </waveActions>
    <waveActions area="any" delay="14">
      <spawn order="attack" type="skeleton_darksoul_frost" nr="3" delay="0" />
      <spawn 				type="beastman_brute_fire" 	   nr="1" delay="1.5" />
      <spawn order="attack" type="skeleton_darksoul_frost" nr="3" delay="3" />
    </waveActions>
    <waveActions area="any" delay="18">
      <spawn order="attack" type="skeleton_darksoul_frost" nr="3" delay="0" />
      <spawn order="attack" type="skeleton_darksoul_frost" nr="3" delay="2" />
    </waveActions>

    <waveActions area="any" delay="0">
      <spawn type="elemental_water" nr="2" delay="4" />
      <spawn type="elemental_water" nr="2" delay="7" />
      <spawn type="elemental_water" nr="2" delay="16" />
    </waveActions>
  </wave>





  <!--  WAVE 4
        Notes:    Druid, TrollForest, Spiders (BOSS)
                  Crystals: 2 crystals
        -->
  <wave>
    <!-- Raise / Lower crystals -->
    <waveActions delay="0">
      <executeTrigger trigger="crystal_7_up" />
      <executeTrigger trigger="crystal_3_up" />
    </waveActions>
    
    <!-- Spawn forest trolls in succession, supported by Druids -->
    <waveActions area="any" delay="0">
      <spawn type="troll_forest" nr="1" delay="0" />
      <spawn type="zombie" nr="3" delay="2" />
      <spawn type="zombie" nr="3" delay="5" />
      <spawn type="zombie" nr="3" delay="12" />
    </waveActions>
	
    <waveActions area="any" delay="5">
      <spawn type="troll_forest" 		nr="1" delay="0" />
      <spawn type="beastman_brute_fire" nr="1" delay="1" />
      <spawn type="spider_poison" 		nr="1" delay="3" />
      <spawn type="druid" 				nr="1" delay="5" />
    </waveActions>
	
    <waveActions area="any" delay="13">
      <spawn type="troll_forest" 		nr="1" delay="0" />
      <spawn type="beastman_brute_fire" nr="1" delay="1" />
      <spawn type="spider_poison" 		nr="1" delay="3" />
      <spawn type="druid" 				nr="1" delay="5" />
    </waveActions>
  </wave>
  
  
  
  
  
  <!--  WAVE 5
        Notes:    Elemental, Beastman, Orc
                  Crystals: 3 crystals
        -->
  <wave>
    <!-- Raise / Lower crystals -->
    <waveActions delay="0">
      <executeTrigger trigger="crystal_7_up" />
      <executeTrigger trigger="crystal_3_up" />
      <executeTrigger trigger="crystal_6_up" />
    </waveActions>

    <!-- Spawn teams of Elemental (lightning) and Beastmen (earth) -->
    <waveActions area="any" delay="0">
      <spawn type="elemental_lightning" nr="2" delay="0" />
      <spawn type="beastman_brute" nr="3" delay="3" />
      <spawn type="beastman_brute_earth" nr="2" delay="3" />
    </waveActions>

    <waveActions area="any" delay="6">
      <spawn type="elemental_lightning" nr="2" delay="0" />
      <spawn type="beastman_brute" nr="3" delay="3" />
      <spawn type="beastman_brute_earth" nr="2" delay="3" />
    </waveActions>

    <!-- Slow trickle of orcs from any direction -->
    <waveActions area="any" delay="0">
      <spawn type="orc_regular" nr="1" delay="0" />
    </waveActions>
	
    <waveActions area="any" delay="2">
      <spawn type="orc_regular" nr="1" delay="0" />
      <spawn type="dwarf_mage" 	nr="1" delay="3" />
    </waveActions>
	
    <waveActions area="any" delay="4">
      <spawn type="orc_regular" nr="3" delay="0" />
    </waveActions>
	
    <waveActions area="any" delay="6">
      <spawn type="orc_regular" nr="1" delay="0" />
      <spawn type="dwarf_mage" 	nr="1" delay="5" />
    </waveActions>
  </wave>





  <!--  WAVE 6
        Notes:    Beastman, Dwarf
                  Crystals: 3 crystals
        -->
  <wave>
    <!-- Raise / Lower crystals -->
    <waveActions delay="0">
      <executeTrigger trigger="crystal_7_down" />
      <executeTrigger trigger="crystal_3_down" />

      <executeTrigger trigger="crystal_2_up" />
      <executeTrigger trigger="crystal_10_up" />
    </waveActions>

    <!-- Spawn a trickle of beastmen and priests inbetween -->
    <waveActions area="any" delay="0">
      <spawn type="beastman_raider" nr="2" delay="0" />
      <spawn type="beastman_raider" nr="2" delay="3" />
      <spawn type="beastman_raider_lightning" nr="1" delay="4" />
    </waveActions>
	
    <waveActions area="any" delay="4">
      <spawn type="beastman_raider" nr="2" delay="0" />
      <spawn type="beastman_raider" nr="2" delay="3" />
      <spawn type="beastman_raider_lightning" nr="1" delay="4" />
    </waveActions>
	
    <waveActions area="any" delay="8">
      <spawn type="beastman_raider" nr="2" delay="0" />
      <spawn type="beastman_raider" nr="2" delay="3" />
      <spawn type="beastman_raider_lightning" nr="1" delay="4" />
    </waveActions>
	
    <waveActions area="any" delay="12">
      <spawn type="beastman_raider" nr="2" delay="0" />
      <spawn type="beastman_raider" nr="2" delay="3" />
      <spawn type="beastman_raider_lightning" nr="1" delay="4" />
    </waveActions>
	
    <waveActions area="any" delay="20">
      <spawn type="beastman_raider" nr="2" delay="0" />
      <spawn type="beastman_raider" nr="2" delay="3" />
      <spawn type="beastman_raider_lightning" nr="1" delay="4" />
    </waveActions>

    <waveActions area="any" delay="6">
      <spawn type="dwarf_mage" nr="1" delay="0" />
    </waveActions>
	
    <waveActions area="any" delay="14">
      <spawn type="dwarf_mage" nr="1" delay="0" />
    </waveActions>
	
    <waveActions area="any" delay="22">
      <spawn type="dwarf_mage" nr="1" delay="0" />
    </waveActions>
  </wave>





  <!--  WAVE 7
        Notes:    Goblin, Orc
                  Crystals: no crystals
        -->
  <wave>
    <!-- Raise / Lower crystals -->
    <waveActions delay="0">
      <executeTrigger trigger="crystal_all_down" />
    </waveActions>

    <!-- Orcs from everywhere -->
    <waveActions area="any" delay="0">
      <spawn type="orc_regular" 	nr="3" delay="0" />
      <spawn type="goblin_warrior_archer" 	nr="2" delay="1.5" />
    </waveActions>
	
    <waveActions area="any" delay="0">
      <spawn type="orc_regular" 			nr="3" delay="3" />
      <spawn type="goblin_warrior_archer" 	nr="2" delay="4.5" />
    </waveActions>
	
    <waveActions area="any" delay="0">
      <spawn type="orc_regular" 	nr="3" delay="6" />
      <spawn type="beholder_malign" nr="1" delay="7.5" />
    </waveActions>
	
    <waveActions area="any" delay="0">
      <spawn type="orc_regular" 			nr="3" delay="9" />
      <spawn type="goblin_warrior_archer" 	nr="1" delay="10.5" />
    </waveActions>

    <!-- Goblin Rogues in squads -->
    <waveActions area="any" delay="2">
      <spawn type="goblin_rogue" 	nr="3" delay="0" />
      <spawn type="goblin_rogue" 	nr="3" delay="4" />
      <spawn type="goblin_rogue" 	nr="3" delay="8" />
    </waveActions>
	
    <waveActions area="any" delay="2">
      <spawn type="goblin_rogue" 	nr="3" delay="0" />
      <spawn type="goblin_rogue" 	nr="3" delay="4" />
      <spawn type="goblin_rogue" 	nr="3" delay="8" />
    </waveActions>

    <!-- Goblin Shamans -->
    <waveActions area="any" delay="5">
      <spawn type="goblin_shaman" nr="1" delay="0" />
      <spawn type="goblin_bomber" nr="1" delay="1" />
    </waveActions>
	
    <waveActions area="any" delay="5">
      <spawn type="goblin_shaman" nr="1" delay="0" />
      <spawn type="goblin_bomber" nr="1" delay="1" />
    </waveActions>
	
    <waveActions area="any" delay="5">
      <spawn type="goblin_shaman" nr="1" delay="0" />
      <spawn type="goblin_shaman" nr="1" delay="7" />
    </waveActions>
	
    <waveActions area="any" delay="5">
      <spawn type="goblin_shaman" nr="1" delay="0" />
      <spawn type="goblin_shaman" nr="1" delay="7" />
    </waveActions>
  </wave>
  
  
  
  
  
  <!--  WAVE 8
        Notes:    Beholder, TrollStone, Orc (BOSS)
                  Crystals: 3 crystals
        -->
  <wave>
    <!-- Raise / Lower crystals -->
    <waveActions delay="0">
      <executeTrigger trigger="crystal_6_down" />
      <executeTrigger trigger="crystal_10_down" />

      <executeTrigger trigger="crystal_2_up" />
      <executeTrigger trigger="crystal_4_up" />
      <executeTrigger trigger="crystal_5_up" />
    </waveActions>

    <!-- Stone Trolls -->
    <waveActions area="any" delay="0">
      <spawn type="troll_stone" 			nr="1" delay="0" />
      <spawn type="goblin_warrior_archer" 	nr="1" delay="2" />
      <spawn type="troll_stone" 			nr="1" delay="10" />
      <spawn type="goblin_warrior_archer" 	nr="1" delay="12" />
    </waveActions>
	
    <waveActions area="any" delay="0">
      <spawn type="troll_stone" 			nr="1" delay="0" />
      <spawn type="goblin_warrior_archer" 	nr="1" delay="2" />
      <spawn type="troll_stone" 			nr="1" delay="13" />
      <spawn type="goblin_warrior_archer" 	nr="1" delay="15" />
    </waveActions>

    <!-- Beholders -->
    <waveActions area="any" delay="2">
      <spawn type="beholder_malign" 	 nr="1" delay="1" />
      <spawn type="goblin_shaman" 		 nr="1" delay="0" />
      <spawn type="beastman_brute_earth" nr="1" delay="0" />
	  
      <spawn type="beholder_malign" 	 nr="1" delay="16" />
      <spawn type="goblin_shaman" 		 nr="1" delay="15" />
      <spawn type="beastman_brute_earth" nr="1" delay="15" />
    </waveActions>

    <waveActions area="any" delay="8">
      <spawn type="orc_captain" nr="4" delay="0" />
      <spawn type="orc_regular" nr="4" delay="3" />
    </waveActions>
	
    <waveActions area="any" delay="16">
      <spawn type="orc_captain" nr="4" delay="0" />
      <spawn type="orc_regular" nr="4" delay="3" />
    </waveActions>
  </wave>





  <!--  WAVE 9
        Notes:    Goblin
                  Crystals: 4 crystals
        -->
  <wave>
    <!-- Raise / Lower crystals -->
    <waveActions delay="0">
      <executeTrigger trigger="crystal_2_down" />

      <executeTrigger trigger="crystal_1_up" />
      <executeTrigger trigger="crystal_8_up" />
    </waveActions>

    <!-- Goblin captains in teams -->
    <waveActions area="any" delay="0">
      <spawn type="goblin_warrior_captain" nr="1" delay="0" />
      <spawn type="goblin_commando" nr="4" delay="0" />
      <spawn type="goblin_commando" nr="5" delay="3" />
    </waveActions>
	
    <waveActions area="any" delay="0">
      <spawn type="goblin_commando" nr="3" delay="2" />
      <spawn type="goblin_commando" nr="5" delay="4" />
      <spawn type="goblin_warrior_captain" nr="1" delay="6" />
    </waveActions>
	
    <waveActions area="any" delay="0">
      <spawn type="goblin_warrior_captain" nr="1" delay="0" />
      <spawn type="goblin_rogue" nr="6" delay="2" />
      <spawn type="goblin_rogue" nr="6" delay="4" />
    </waveActions>
	
    <waveActions area="any" delay="0">
      <spawn type="goblin_rogue" nr="6" delay="2" />
      <spawn type="goblin_rogue" nr="6" delay="4" />
      <spawn type="goblin_warrior_captain" nr="1" delay="6" />
    </waveActions>
	
    <waveActions area="any" delay="0">
      <spawn type="goblin_warrior_captain" nr="2" delay="15" />
      <spawn type="goblin_warrior_captain" nr="2" delay="20    " />
    </waveActions>

    <!-- Trickle of goblin archers (fire) from all sides -->
    <waveActions area="any" delay="0">
      <spawn type="beholder_malign" 	  nr="1" delay="0" />
      <spawn type="goblin_warrior_archer" nr="2" delay="2" />
    </waveActions>
    <waveActions area="any" delay="2">
      <spawn type="goblin_warrior_archer" nr="3" delay="0" />
    </waveActions>
    <waveActions area="any" delay="4">
      <spawn type="goblin_warrior_archer" nr="2" delay="0" />
    </waveActions>
    <waveActions area="any" delay="6">
      <spawn type="goblin_warrior_archer" nr="2" delay="0" />
    </waveActions>
    <waveActions area="any" delay="8">
      <spawn type="goblin_warrior_archer" nr="3" delay="0" />
    </waveActions>
    <waveActions area="any" delay="10">
      <spawn type="beholder_malign" 	  nr="1" delay="0" />
      <spawn type="goblin_warrior_archer" nr="3" delay="2" />
    </waveActions>
    <waveActions area="any" delay="13">
      <spawn type="goblin_warrior_archer" nr="4" delay="0" />
    </waveActions>
    <waveActions area="any" delay="16">
      <spawn type="beholder_malign" 	  nr="1" delay="0" />
      <spawn type="goblin_warrior_archer" nr="3" delay="2" />
    </waveActions>
    <waveActions area="any" delay="19">
      <spawn type="goblin_warrior_archer" nr="4" delay="0" />
    </waveActions>
    <waveActions area="any" delay="22">
      <spawn type="goblin_warrior_archer" nr="4" delay="0" />
    </waveActions>
  </wave>





  <!--  WAVE 10
        Notes:    Darksoul, Beastman
                  Crystals: 4 crystals
        -->
  <wave>
    <!-- Raise / Lower crystals -->
    <waveActions delay="0">
      <executeTrigger trigger="crystal_1_down" />
      <executeTrigger trigger="crystal_4_down" />
      <executeTrigger trigger="crystal_5_down" />
      <executeTrigger trigger="crystal_8_down" />

      <executeTrigger trigger="crystal_2_up" />
      <executeTrigger trigger="crystal_3_up" />
      <executeTrigger trigger="crystal_7_up" />
      <executeTrigger trigger="crystal_10_up" />
    </waveActions>

    <!-- Darksoul frost from the east -->
    <waveActions area="eastleft" delay="0">
      <spawn order="wander" targetarea="defend" type="skeleton_darksoul_frost" nr="2" delay="0" />
      <spawn order="wander" targetarea="defend" type="skeleton_darksoul_frost" nr="2" delay="3" />
      <spawn order="wander" targetarea="defend" type="skeleton_darksoul_frost" nr="2" delay="6" />
      <spawn order="wander" targetarea="defend" type="skeleton_darksoul_frost" nr="2" delay="10" />
      <spawn order="wander" targetarea="defend" type="skeleton_darksoul_frost" nr="2" delay="17" />
    </waveActions>

    <waveActions area="eastright" delay="0">
      <spawn order="wander" targetarea="defend" type="skeleton_darksoul_frost" nr="2" delay="0" />
      <spawn order="wander" targetarea="defend" type="skeleton_darksoul_frost" nr="2" delay="3" />
      <spawn order="wander" targetarea="defend" type="skeleton_darksoul_frost" nr="2" delay="6" />
      <spawn order="wander" targetarea="defend" type="skeleton_darksoul_frost" nr="2" delay="10" />
      <spawn order="wander" targetarea="defend" type="skeleton_darksoul_frost" nr="2" delay="17" />
    </waveActions>
    
    <!-- SnowTrolls stream in from one random direction -->
    <waveActions area="any" delay="0">
      <spawn type="troll_snow" nr="1" delay="0" />
      <spawn type="troll_snow" nr="1" delay="20" />
    </waveActions>

    <!-- Beastman brute fire from the west -->
    <waveActions area="westleft" delay="0">
      <spawn type="beastman_brute_earth" nr="1" delay="0" />
      <spawn type="beastman_brute" 		 nr="4" delay="3" />
      <spawn type="beastman_brute_fire"  nr="1" delay="6" />
      <spawn type="beastman_brute" 		 nr="4" delay="9" />
    </waveActions>
	
    <waveActions area="westright" delay="5">
      <spawn type="beastman_brute_earth" nr="1" delay="0" />
      <spawn type="beastman_brute" 		 nr="4" delay="3" />
      <spawn type="beastman_brute_fire"  nr="1" delay="6" />
      <spawn type="beastman_brute" 		 nr="4" delay="9" />
    </waveActions>
  </wave>





  <!--  WAVE 11
        Notes:    Orc, Goblin
                  Crystals: no crystals
        -->
  <wave>
    <!-- Raise / Lower crystals -->
    <waveActions delay="0">
      <executeTrigger trigger="crystal_all_down" />
    </waveActions>

    <!-- Loads of Orc Berserkers -->
    <waveActions area="any" delay="0">
      <spawn type="orc_captain" 	nr="2" delay="0" />
      <spawn type="skeleton_wight" 	nr="1" delay="3" />
      <spawn type="orc_captain" 	nr="2" delay="8" />
    </waveActions>
	
    <waveActions area="any" delay="0">
      <spawn type="orc_captain" 	nr="2" delay="0" />
      <spawn type="skeleton_wight" 	nr="1" delay="3" />
      <spawn type="orc_captain" 	nr="2" delay="8" />
    </waveActions>
	
    <waveActions area="any" delay="6">
      <spawn type="orc_captain" 	nr="2" delay="0" />
      <spawn type="skeleton_wight" 	nr="1" delay="3" />
      <spawn type="orc_captain" 	nr="2" delay="8" />
    </waveActions>
	
    <waveActions area="any" delay="6">
      <spawn type="orc_captain" 	nr="2" delay="0" />
      <spawn type="skeleton_wight" 	nr="1" delay="3" />
      <spawn type="orc_captain" 	nr="2" delay="8" />
    </waveActions>

    <!-- Goblin Warrior Archers -->
    <waveActions area="any" delay="0">
      <spawn type="goblin_warrior_archer" nr="4" delay="0" />
      <spawn type="goblin_warrior_archer" nr="4" delay="6" />
    </waveActions>
	
    <waveActions area="any" delay="6">
      <spawn type="goblin_warrior_archer" nr="4" delay="0" />
      <spawn type="goblin_warrior_archer" nr="4" delay="6" />
    </waveActions>
  </wave>
  
  
  
  
  
  <!--  WAVE 12
        Notes:    FireDrake, TrollSnow (BOSS)
                  Crystals: 4 crystals
        -->
  <wave>
    <!-- Raise / Lower crystals -->
    <waveActions delay="0">
      <executeTrigger trigger="crystal_7_down" />
      <executeTrigger trigger="crystal_10_down" />

      <executeTrigger trigger="crystal_8_up" />
      <executeTrigger trigger="crystal_9_up" />
    </waveActions>
    
    <!-- SnowTrolls stream in from one random direction -->
    <waveActions area="any" delay="0">
      <spawn type="beastman_brute_fire" nr="1" delay="0" />
      <spawn type="goblin_shaman" 		nr="1" delay="1" />
      <spawn type="troll_snow" 			nr="1" delay="3" />
	  
      <spawn type="beastman_brute_fire" nr="1" delay="10" />
      <spawn type="goblin_shaman" 		nr="1" delay="11" />
      <spawn type="troll_snow" 			nr="1" delay="13" />
	  
      <spawn type="beastman_brute_fire" nr="1" delay="20" />
      <spawn type="goblin_shaman" 		nr="1" delay="21" />
      <spawn type="troll_snow" 			nr="1" delay="23" />
    </waveActions>

    <!-- FireDrakes trickle in from all direction -->
    <waveActions area="any" delay="0">
      <spawn type="firedrake" 			  nr="1" delay="0" />
      <spawn type="goblin_warrior_archer" nr="2" delay="3" />
    </waveActions>
	
    <waveActions area="any" delay="0">
      <spawn type="firedrake" 			  nr="1" delay="3" />
      <spawn type="goblin_warrior_archer" nr="2" delay="6" />
    </waveActions>
	
    <waveActions area="any" delay="0">
      <spawn type="firedrake" 			  nr="1" delay="6" />
      <spawn type="goblin_warrior_archer" nr="2" delay="9" />
    </waveActions>
	
    <waveActions area="any" delay="0">
      <spawn type="firedrake" 			  nr="1" delay="10" />
      <spawn type="goblin_warrior_archer" nr="2" delay="13" />
    </waveActions>
	
    <waveActions area="any" delay="0">
      <spawn type="firedrake" 			  nr="1" delay="14" />
      <spawn type="goblin_warrior_archer" nr="2" delay="17" />
    </waveActions>
	
    <waveActions area="any" delay="0">
      <spawn type="firedrake" 			  nr="1" delay="17" />
      <spawn type="goblin_warrior_archer" nr="2" delay="20" />
    </waveActions>
  </wave>
  
  
  
  
  
  <!--  WAVE 13
        Notes:    Necromancer, Elemental
                  Crystals: 5 crystals
        -->
  <wave>
    <!-- Raise / Lower crystals -->
    <waveActions delay="0">
      <executeTrigger trigger="crystal_9_down" />
      <executeTrigger trigger="crystal_2_down" />

      <executeTrigger trigger="crystal_3_up" />
      <executeTrigger trigger="crystal_8_up" />
      <executeTrigger trigger="crystal_7_up" />
      <executeTrigger trigger="crystal_5_up" />
      <executeTrigger trigger="crystal_6_up" />
    </waveActions>

    <!-- Elementals & Necromancer squads -->
    <waveActions area="any" delay="0">
      <spawn type="elemental_life" 	nr="2" delay="0" />
      <spawn type="necromancer" 	nr="2" delay="0" />
    </waveActions>
    <waveActions area="any" delay="0">
      <spawn type="skeleton_wight" 	nr="2" delay="0" />
      <spawn type="elemental_life" 	nr="1" delay="0" />
    </waveActions>
	
    <waveActions area="any" delay="7">
      <spawn type="elemental_life" 	nr="2" delay="0" />
      <spawn type="necromancer" 	nr="2" delay="0" />
    </waveActions>
    <waveActions area="any" delay="7">
      <spawn type="skeleton_wight" 	nr="2" delay="0" />
      <spawn type="elemental_life" 	nr="1" delay="0" />
    </waveActions>
	
    <waveActions area="any" delay="14">
      <spawn type="elemental_life" 	nr="2" delay="0" />
      <spawn type="necromancer" 	nr="2" delay="0" />
    </waveActions>
    <waveActions area="any" delay="14">
      <spawn type="skeleton_wight" 	nr="2" delay="0" />
      <spawn type="elemental_life" 	nr="1" delay="0" />
    </waveActions>
  </wave>





  <!--  WAVE 14
        Notes:    Ghouls, Spiders, Orcs
                  Crystals: 5 crystals
        -->
  <wave>
    <!-- Raise / Lower crystals -->
    <waveActions delay="0">
      <executeTrigger trigger="crystal_8_down" />
      <executeTrigger trigger="crystal_7_down" />
      <executeTrigger trigger="crystal_5_down" />
      <executeTrigger trigger="crystal_6_down" />

      <executeTrigger trigger="crystal_2_up" />
      <executeTrigger trigger="crystal_7_up" />
      <executeTrigger trigger="crystal_3_up" />
      <executeTrigger trigger="crystal_4_up" />
      <executeTrigger trigger="crystal_10_up" />
    </waveActions>
    
    <!-- Ghouls teams -->
    <waveActions area="any" delay="0">
      <spawn type="ghoul" 				nr="4" delay="0" />
      <spawn type="beastman_brute_fire" nr="1" delay="1" />
      <spawn type="ghoul_flamer" 		nr="3" delay="2" />
    </waveActions>
    <waveActions area="any" delay="7">
      <spawn type="ghoul" 				nr="4" delay="0" />
      <spawn type="beastman_brute_fire" nr="1" delay="1" />
      <spawn type="ghoul_flamer" 		nr="3" delay="2" />
    </waveActions>
    <waveActions area="any" delay="14">
      <spawn type="ghoul" 				nr="2" delay="0" />
      <spawn type="beastman_brute_fire" nr="1" delay="1" />
      <spawn type="ghoul_flamer" 		nr="3" delay="2" />
    </waveActions>

    <!-- Orcberserk teams -->
    <waveActions area="any" delay="6">
      <spawn type="orc_berserk" nr="2" delay="0" />
      <spawn type="orc_berserk" nr="2" delay="3" />
      <spawn type="orc_berserk" nr="1" delay="15" />
    </waveActions>
    <waveActions area="any" delay="12">
      <spawn type="orc_berserk" nr="2" delay="0" />
      <spawn type="orc_berserk" nr="2" delay="3" />
      <spawn type="orc_berserk" nr="1" delay="9" />
    </waveActions>

    <!-- Spiders trickle in from all directions -->
    <waveActions area="any" delay="0">
      <spawn type="spider_forest" 	nr="5" delay="0" />
    </waveActions>
    <waveActions area="any" delay="3">
      <spawn type="spider_forest" 	nr="5" delay="0" />
      <spawn type="troll_stone" 	nr="1" delay="0" />
    </waveActions>
    <waveActions area="any" delay="6">
      <spawn type="spider_forest" 	nr="5" delay="0" />
    </waveActions>
    <waveActions area="any" delay="10">
      <spawn type="spider_forest" 	nr="5" delay="0" />
      <spawn type="troll_stone" 	nr="1" delay="0" />
    </waveActions>
    <waveActions area="any" delay="14">
      <spawn type="spider_forest" 	nr="5" delay="0" />
    </waveActions>
    <waveActions area="any" delay="20">
      <spawn type="spider_forest" 	nr="5" delay="0" />
      <spawn type="troll_stone" 	nr="1" delay="0" />
    </waveActions>
  </wave>





  <!--  WAVE 15
        Notes:    Ghouls
                  Crystals: no crystals
        -->
  <wave>
    <!-- Raise / Lower crystals -->
    <waveActions delay="0">
      <executeTrigger trigger="crystal_all_down" />
    </waveActions>

    <!-- Ghouls from all directions -->
    <waveActions area="any" delay="0">
      <spawn type="ghoul" 			nr="2" delay="0" />
      <spawn type="goblin_warlock" 	nr="2" delay="0" />
    </waveActions>
    <waveActions area="any" delay="0">
      <spawn type="ghoul" 			nr="2" delay="0" />
      <spawn type="goblin_warlock" 	nr="2" delay="0" />
    </waveActions>
    <waveActions area="any" delay="0">
      <spawn type="ghoul" 			nr="2" delay="0" />
      <spawn type="goblin_warlock" 	nr="2" delay="0" />
    </waveActions>
	
    <waveActions area="any" delay="6">
      <spawn type="ghoul" 						nr="2" delay="0" />
      <spawn type="skeleton_darksoul_frost" 	nr="1" delay="2" order="wander" targetarea="defend" />
      <spawn type="skeleton_darksoul_lightning" nr="1" delay="3" order="wander" targetarea="defend" />
    </waveActions>
    <waveActions area="any" delay="6">
      <spawn type="ghoul" 						nr="3" delay="0" />
      <spawn type="skeleton_darksoul_frost" 	nr="1" delay="2" order="wander" targetarea="defend" />
      <spawn type="skeleton_darksoul_lightning" nr="1" delay="3" order="wander" targetarea="defend" />
    </waveActions>
    <waveActions area="any" delay="6">
      <spawn type="ghoul" 						nr="3" delay="0" />
      <spawn type="skeleton_darksoul_frost" 	nr="1" delay="2" order="wander" targetarea="defend" />
      <spawn type="skeleton_darksoul_lightning" nr="1" delay="3" order="wander" targetarea="defend" />
    </waveActions>
	
    <waveActions area="any" delay="12">
      <spawn type="ghoul" 			nr="3" delay="0" />
      <spawn type="beholder_malign" nr="1" delay="0" />
    </waveActions>
    <waveActions area="any" delay="12">
      <spawn type="ghoul" 			nr="3" delay="0" />
      <spawn type="spider_poison" 	nr="1" delay="5" />
    </waveActions>
    <waveActions area="any" delay="20">
      <spawn type="ghoul" 			nr="3" delay="0" />
      <spawn type="spider_poison" 	nr="1" delay="5" />
    </waveActions>
  </wave>
  
  
  
  
  
  <!--  WAVE 16
        Notes:    Skeleton, Goblin, Elemental (BOSS)
                  Crystals: all crystals
        -->
  <wave>
    <!-- Raise / Lower crystals -->
    <waveActions delay="0">
      <executeTrigger trigger="crystal_all_up" />
    </waveActions>
    
    <!-- Skeleton wights from all directions -->
    <waveActions area="any" delay="0">
      <spawn type="skeleton_swordsman" 	nr="2" delay="0" />
      <spawn type="skeleton_wight" 		nr="2" delay="0" />
    </waveActions>
    <waveActions area="any" delay="3">
      <spawn type="skeleton_swordsman" 	nr="2" delay="0" />
      <spawn type="skeleton_wight" 		nr="2" delay="0" />
    </waveActions>
    <waveActions area="any" delay="6">
      <spawn type="skeleton_swordsman" 	nr="2" delay="0" />
      <spawn type="skeleton_wight" 		nr="2" delay="0" />
    </waveActions>
    <waveActions area="any" delay="9">
      <spawn type="skeleton_swordsman" 	nr="2" delay="0" />
      <spawn type="skeleton_wight" 		nr="2" delay="0" />
    </waveActions>
    <waveActions area="any" delay="12">
      <spawn type="skeleton_swordsman" 	nr="2" delay="0" />
      <spawn type="skeleton_wight" 		nr="2" delay="0" />
    </waveActions>
    <waveActions area="any" delay="15">
      <spawn type="skeleton_swordsman" 	nr="2" delay="0" />
      <spawn type="skeleton_wight" 		nr="2" delay="0" />
    </waveActions>
    <waveActions area="any" delay="18">
      <spawn type="skeleton_swordsman" 	nr="2" delay="0" />
      <spawn type="skeleton_wight" 		nr="2" delay="0" />
    </waveActions>
    <waveActions area="any" delay="21">
      <spawn type="skeleton_swordsman" 	nr="2" delay="0" />
      <spawn type="skeleton_wight" 		nr="2" delay="0" />
    </waveActions>

    <!-- Goblin warlocks as support -->
    <waveActions area="any" delay="8">
      <spawn type="goblin_warlock" nr="1" delay="0" />
    </waveActions>
    <waveActions area="any" delay="8">
      <spawn type="goblin_warlock" nr="1" delay="0" />
    </waveActions>
    <waveActions area="any" delay="8">
      <spawn type="goblin_warlock" nr="1" delay="0" />
    </waveActions>

    <!-- Large group of elementals without an element from all sides -->
    <waveActions area="any" delay="15">
      <spawn type="elemental" nr="1" delay="0" />
    </waveActions>
    <waveActions area="any" delay="15">
      <spawn type="elemental" nr="1" delay="0" />
    </waveActions>
    <waveActions area="any" delay="15">
      <spawn type="elemental" nr="1" delay="0" />
    </waveActions>
    <waveActions area="any" delay="15">
      <spawn type="elemental" nr="1" delay="0" />
    </waveActions>
  </wave>





  <!--  WAVE 17
        Notes:    Darksoul, Elementals, Goblins
                  Crystals: all crystals
        -->
  <wave>
    <!-- Raise / Lower crystals -->
    <waveActions delay="0">
      <executeTrigger trigger="crystal_all_up" />
    </waveActions>
    
    <!-- Darksouls of all elements trickle in from any direction -->
    <waveActions area="any" delay="0">
      <spawn type="troll_stone" nr="1" delay="0" />
      <spawn order="wander" targetarea="defend" type="skeleton_darksoul_arcane" 	nr="1" delay="0" />
      <spawn order="wander" targetarea="defend" type="skeleton_darksoul_frost" 		nr="1" delay="2" />
      <spawn order="wander" targetarea="defend" type="skeleton_darksoul_lightning" 	nr="1" delay="4" />
    </waveActions>
    <waveActions area="any" delay="8">
      <spawn type="beholder_malign" nr="1" delay="0" />
      <spawn order="wander" targetarea="defend" type="skeleton_darksoul_arcane" 	nr="1" delay="0" />
      <spawn order="wander" targetarea="defend" type="skeleton_darksoul_frost" 		nr="1" delay="2" />
      <spawn order="wander" targetarea="defend" type="skeleton_darksoul_lightning" 	nr="1" delay="4" />
    </waveActions>
    <waveActions area="any" delay="16">
      <spawn type="troll_stone" nr="1" delay="0" />
      <spawn order="wander" targetarea="defend" type="skeleton_darksoul_arcane" 	nr="1" delay="0" />
      <spawn order="wander" targetarea="defend" type="skeleton_darksoul_frost" 		nr="1" delay="2" />
      <spawn order="wander" targetarea="defend" type="skeleton_darksoul_lightning" 	nr="1" delay="4" />
    </waveActions>
    <waveActions area="any" delay="24">
      <spawn type="beholder_malign" nr="1" delay="0" />
      <spawn order="wander" targetarea="defend" type="skeleton_darksoul_arcane" 	nr="1" delay="0" />
      <spawn order="wander" targetarea="defend" type="skeleton_darksoul_frost" 		nr="1" delay="2" />
      <spawn order="wander" targetarea="defend" type="skeleton_darksoul_lightning" 	nr="1" delay="4" />
    </waveActions>

    <!-- Goblin warlock as support with delayed Elementals as trip-up support -->
    <waveActions area="any" delay="0">
      <spawn type="goblin_warlock" nr="2" delay="0" />
    </waveActions>
    <waveActions area="any" delay="8">
      <spawn type="goblin_warlock" nr="2" delay="0" />
    </waveActions>
    <waveActions area="any" delay="16">
      <spawn type="goblin_warlock" nr="2" delay="0" />
    </waveActions>
    <waveActions area="any" delay="24">
      <spawn type="goblin_warlock" nr="2" delay="0" />
    </waveActions>
  </wave>

  <!--  WAVE 18
        Notes:    Druids, Beholders, FireDrakes, Spiders
                  Crystals: no crystals
        -->
  <wave>
    <!-- Raise / Lower crystals -->
    <waveActions delay="0">
      <executeTrigger trigger="crystal_all_down" />
    </waveActions>
    
    <!-- Teams of Beholders with Druid support come in from all directions -->
    <waveActions area="any" delay="0">
      <spawn type="skeleton_darksoul_frost" nr="2" delay="2" order="attack" />
      <spawn type="druid" 					nr="2" delay="4" />
    </waveActions>
    <waveActions area="any" delay="10">
      <spawn type="beholder_malign" 		nr="1" delay="0" />
      <spawn type="skeleton_darksoul_frost" nr="2" delay="2" order="attack" />
      <spawn type="druid" 					nr="2" delay="4" />
    </waveActions>

    <!-- Spider teams -->
    <waveActions area="any" delay="10">
      <spawn type="spider_forest" nr="4" delay="2" />
      <spawn type="spider_poison" nr="1" delay="5" />
      <spawn type="spider_forest" nr="4" delay="7" />
    </waveActions>
    <waveActions area="any" delay="20">
      <spawn type="spider_forest" nr="4" delay="2" />
      <spawn type="spider_poison" nr="1" delay="5" />
      <spawn type="spider_forest" nr="4" delay="7" />
    </waveActions>

    <!-- FireDrakes trickle in as support from all directions -->
    <waveActions area="any" delay="5">
      <spawn type="firedrake" nr="1" delay="0" />
    </waveActions>
    <waveActions area="any" delay="5">
      <spawn type="firedrake" nr="2" delay="3" />
    </waveActions>
    <waveActions area="any" delay="5">
      <spawn type="firedrake" nr="2" delay="6" />
    </waveActions>
    <waveActions area="any" delay="5">
      <spawn type="troll_stone" nr="1" delay="10" />
      <spawn type="firedrake" 	nr="2" delay="10" />
    </waveActions>
    <waveActions area="any" delay="5">
      <spawn type="firedrake" nr="2" delay="13" />
    </waveActions>
    <waveActions area="any" delay="5">
      <spawn type="firedrake" nr="1" delay="18" />
    </waveActions>
    <waveActions area="any" delay="5">
      <spawn type="troll_stone" nr="1" delay="24" />
      <spawn type="firedrake" 	nr="2" delay="27" />
    </waveActions>
  </wave>

  <!--  WAVE 19
        Notes:    Goblin
                  Crystals: all crystals
        -->
  <wave>
    <!-- Raise / Lower crystals -->
    <waveActions delay="0">
      <executeTrigger trigger="crystal_all_up" />
    </waveActions>

    <!-- Teams of Goblins -->
    <waveActions area="any" delay="0">
      <spawn type="goblin_warrior_archer" nr="5" delay="0" />
      <spawn type="goblin_warlock" nr="2" delay="2" />
    </waveActions>
    <waveActions area="any" delay="0">
      <spawn type="goblin_warrior_archer" nr="5" delay="0" />
      <spawn type="goblin_warlock" nr="2" delay="2" />
    </waveActions>

    <!-- GoblinRogues and GoblinBombers stream in from all sides -->
    <waveActions area="any" delay="0">
      <spawn type="goblin_rogue" nr="9" delay="0" />
      <spawn type="goblin_bomber" nr="2" delay="2" />
    </waveActions>
    <waveActions area="any" delay="2">
      <spawn type="goblin_rogue" nr="9" delay="0" />
      <spawn type="goblin_bomber" nr="2" delay="2" />
    </waveActions>
    <waveActions area="any" delay="2">
      <spawn type="goblin_rogue" nr="9" delay="0" />
      <spawn type="goblin_bomber" nr="2" delay="2" />
    </waveActions>
    <waveActions area="any" delay="4">
      <spawn type="goblin_rogue" nr="5" delay="0" />
      <spawn type="goblin_commando" nr="1" delay="1" />
      <spawn type="goblin_bomber" nr="2" delay="2" />
    </waveActions>
    <waveActions area="any" delay="4">
      <spawn type="goblin_rogue" nr="5" delay="0" />
      <spawn type="goblin_commando" nr="1" delay="1" />
      <spawn type="goblin_bomber" nr="2" delay="2" />
    </waveActions>
    <waveActions area="any" delay="8">
      <spawn type="goblin_rogue" nr="5" delay="0" />
      <spawn type="goblin_commando" nr="1" delay="1" />
      <spawn type="goblin_bomber" nr="2" delay="2" />
    </waveActions>
    <waveActions area="any" delay="8">
      <spawn type="goblin_rogue" nr="9" delay="0" />
      <spawn type="goblin_commando" nr="2" delay="1" />
      <spawn type="goblin_bomber" nr="2" delay="2" />
    </waveActions>
    <waveActions area="any" delay="8">
      <spawn type="goblin_rogue" nr="9" delay="0" />
      <spawn type="goblin_commando" nr="2" delay="1" />
      <spawn type="goblin_bomber" nr="2" delay="2" />
    </waveActions>
  </wave>
  
  <!--  WAVE 20
        Notes:    A mix of everything (BOSS, FINAL WAVE)
                  Crystals: all crystals, slowly removed one by one during wave
        -->
  <wave>
    <!-- Raise all crystals
          Then lower them one by one over the course of the wave.
    -->
    <waveActions delay="0">
      <executeTrigger trigger="crystal_all_up" />

      <executeTrigger trigger="crystal_1_down"  delay="10" />
      <executeTrigger trigger="crystal_2_down"  delay="17" />
      <executeTrigger trigger="crystal_3_down"  delay="24" />
      <executeTrigger trigger="crystal_4_down"  delay="31" />
      <executeTrigger trigger="crystal_5_down"  delay="38" />
      <executeTrigger trigger="crystal_6_down"  delay="45" />
      <executeTrigger trigger="crystal_7_down"  delay="52" />
      <executeTrigger trigger="crystal_8_down"  delay="59" />
      <executeTrigger trigger="crystal_9_down"  delay="66" />
      <executeTrigger trigger="crystal_10_down" delay="73" />
    </waveActions>
    
    <!-- Step 1: Druids -->
    <waveActions area="any" delay="0">
      <spawn type="druid" 			nr="2" delay="0" />
      <spawn type="treespirit" 		nr="2" delay="0" />
      <spawn type="goblin_shaman" 	nr="1" delay="1" />
      <spawn type="goblin_shaman" 	nr="1" delay="5" />
	  
      <spawn type="treespirit" 		nr="2" delay="10" />
      <spawn type="goblin_shaman" 	nr="1" delay="11" />
      <spawn type="goblin_shaman" 	nr="1" delay="15" />
	  
      <spawn type="druid" 			nr="1" delay="18" />
      <spawn type="treespirit" 		nr="2" delay="20" />
      <spawn type="goblin_shaman" 	nr="1" delay="21" />
      <spawn type="goblin_shaman" 	nr="1" delay="25" />
    </waveActions>

    <!-- Step 2: FireDrakes -->
    <waveActions area="any" delay="8">
      <spawn type="firedrake" nr="2" delay="0" />
    </waveActions>
    <waveActions area="any" delay="8">
      <spawn type="firedrake" nr="2" delay="0" />
    </waveActions>
    <waveActions area="any" delay="8">
      <spawn type="firedrake" nr="1" delay="0" />
    </waveActions>
    <waveActions area="any" delay="8">
      <spawn type="firedrake" nr="1" delay="0" />
    </waveActions>
    <waveActions area="any" delay="8">
      <spawn type="firedrake" nr="1" delay="0" />
    </waveActions>

    <!-- Step 3: Necromancers & Shamans -->
    <waveActions area="any" delay="16">
      <spawn type="necromancer" nr="1" delay="0" />
    </waveActions>
    <waveActions area="any" delay="16">
      <spawn type="necromancer" nr="1" delay="0" />
    </waveActions>
    <waveActions area="any" delay="16">
      <spawn type="zombie" nr="3" delay="0" />
      <spawn type="zombie" nr="3" delay="8" />
    </waveActions>
    <waveActions area="any" delay="16">
      <spawn type="zombie" nr="3" delay="0" />
      <spawn type="zombie" nr="3" delay="8" />
    </waveActions>
    <waveActions area="any" delay="16">
      <spawn type="zombie" nr="3" delay="0" />
      <spawn type="zombie" nr="3" delay="8" />
    </waveActions>

    <!-- Step 4: Dwarves -->
    <waveActions area="any" delay="24">
      <spawn type="dwarf_warrior" nr="2" delay="0" />
      <spawn type="dwarf_warrior" nr="2" delay="0" />
    </waveActions>
    <waveActions area="any" delay="24">
      <spawn type="dwarf_captain" 	nr="1" delay="0" />
      <spawn type="dwarf_mage" 		nr="1" delay="4" />
    </waveActions>
    <waveActions area="any" delay="55">
      <spawn type="dwarf_mage" 		nr="1" delay="0" />
      <spawn type="dwarf_warrior" 	nr="2" delay="0" />
    </waveActions>

    <!-- Trolls, naturally -->
    <waveActions area="any" delay="4">
      <spawn type="troll_forest" 	nr="1" delay="0" />
      <spawn type="spider_forest" 	nr="5" delay="3" />
    </waveActions>
    <waveActions area="any" delay="4">
      <spawn type="troll_forest" 	nr="1" delay="0" />
      <spawn type="spider_forest" 	nr="5" delay="3" />
    </waveActions>
    <waveActions area="any" delay="4">
      <spawn type="troll_war" 		nr="1" delay="27" />
    </waveActions>
    <waveActions area="any" delay="4">
      <spawn type="troll_war" 		nr="1" delay="32" />
    </waveActions>
    <waveActions area="any" delay="4">
      <spawn type="troll_snow" 		nr="1" delay="64" />
    </waveActions>

    <!-- Trickles of trip-ups -->
    
    <!-- Elemental (no element) trickle -->
    <waveActions area="any" delay="2">
      <spawn type="elemental" nr="1" delay="0" />
    </waveActions>
    <waveActions area="any" delay="2">
      <spawn type="elemental" nr="1" delay="10" />
    </waveActions>
    <waveActions area="any" delay="2">
      <spawn type="elemental" nr="1" delay="20" />
    </waveActions>
    <waveActions area="any" delay="2">
      <spawn type="elemental" nr="1" delay="30" />
    </waveActions>

    <!-- Darksouls (all elements) trickle -->
    <waveActions area="any" delay="3">
      <spawn order="wander" targetarea="defend" type="skeleton_darksoul_arcane" 	nr="1" delay="0" />
      <spawn order="wander" targetarea="defend" type="skeleton_darksoul_frost" 		nr="1" delay="0" />
      <spawn order="wander" targetarea="defend" type="skeleton_darksoul_lightning" 	nr="1" delay="0" />
    </waveActions>
    <waveActions area="any" delay="3">
      <spawn order="wander" targetarea="defend" type="skeleton_darksoul_arcane" 	nr="1" delay="18" />
      <spawn order="wander" targetarea="defend" type="skeleton_darksoul_frost" 		nr="1" delay="18" />
      <spawn order="wander" targetarea="defend" type="skeleton_darksoul_lightning" 	nr="1" delay="18" />
    </waveActions>
    <waveActions area="any" delay="3">
      <spawn order="wander" targetarea="defend" type="skeleton_darksoul_arcane" 	nr="1" delay="38" />
      <spawn order="wander" targetarea="defend" type="skeleton_darksoul_frost" 		nr="1" delay="38" />
      <spawn order="wander" targetarea="defend" type="skeleton_darksoul_lightning" 	nr="1" delay="38" />
    </waveActions>
    <waveActions area="any" delay="3">
      <spawn order="wander" targetarea="defend" type="skeleton_darksoul_arcane" 	nr="1" delay="60" />
      <spawn order="wander" targetarea="defend" type="skeleton_darksoul_frost" 		nr="1" delay="60" />
      <spawn order="wander" targetarea="defend" type="skeleton_darksoul_lightning" 	nr="1" delay="60" />
    </waveActions>
  </wave>
</Scene>
  
  

